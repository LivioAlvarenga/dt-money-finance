<h1 align="center"> 
	Projeto FULLSTACK DT Money Gest√£o Financeira com Nextjs 13 App Router, React, Typescript, Tailwindcss, Axios, Docker, Prisma, Vitest e API Rest SOLID Nextjs.
</h1>

<p align="center">
 <a href="#-sobre-o-projeto">Sobre</a> ‚Ä¢
 <a href="#-vitrine-dev">Vitrine Dev</a> ‚Ä¢
 <a href="#-tecnologias">Tecnologias</a> ‚Ä¢
 <a href="#-instala√ß√£o">Instala√ß√µes</a> ‚Ä¢
 <a href="#-funcionalidades">Funcionalidades</a> ‚Ä¢
 <a href="#-deploy">Deploy</a> ‚Ä¢
 <a href="#-good-habits">Good habits</a> ‚Ä¢
 <a href="#-autor">Autor</a> ‚Ä¢ 
 <a href="#-licen√ßa">Licen√ßa</a>
</p>

&nbsp;

![DT Money Desktop](https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/desktop.png?raw=true#vitrinedev)

![DT Money Tablet](https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/tablet.png?raw=true)

![DT Money mobile](https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/mobile.png?raw=true)

<a id="-sobre-o-projeto"></a>

## üíª Sobre o projeto

üöÄ Ol√°, sou Livio Alvarenga, um desenvolvedor Full Stack. Hoje, tenho o prazer de apresentar a voc√™s uma solu√ß√£o inovadora que desenvolvi - o DT Money, uma aplica√ß√£o de gest√£o financeira. Utilizando tecnologias modernas como Nextjs 13, React, TypeScript, Tailwindcss e Axios, esse aplicativo oferece uma maneira eficiente de gerenciar suas finan√ßas.

Com o DT Money, voc√™ pode ter controle total sobre suas transa√ß√µes financeiras, registrando entradas e sa√≠das, categorizando-as e visualizando o balan√ßo geral. Projetado com uma interface amig√°vel e responsiva, o aplicativo √© compat√≠vel com diferentes dispositivos, incluindo desktop, tablet e mobile.

Neste reposit√≥rio, voc√™ encontrar√° todo o c√≥digo-fonte, bem como detalhes sobre as funcionalidades e tecnologias empregadas. Al√©m das tecnologias j√° mencionadas, inclui recursos como um roteador de aplicativos, integra√ß√£o com a API e componentes reutiliz√°veis.

Eu defini algumas regras de neg√≥cio que devem ser observadas, e tamb√©m incorporei boas pr√°ticas de desenvolvimento, como o uso de hooks e componentiza√ß√£o.

Convido voc√™s a explorarem o aplicativo em detalhes, aprendendo com o c√≥digo e contribuindo se desejarem. Seja bem-vindo ao meu universo de codifica√ß√£o!

&nbsp;

<p align="center">
  <a href="#license"><img src="https://img.shields.io/github/license/LivioAlvarenga/dt-money-finance?color=ff0000"></a>
  <a href="https://github.com/LivioAlvarenga/dt-money-finance/issues"><img src="https://img.shields.io/github/issues/LivioAlvarenga/dt-money-finance" alt="issue site dt-money-finance" /></a>
  <a href="https://github.com/LivioAlvarenga/dt-money-finance"><img src="https://img.shields.io/github/languages/count/LivioAlvarenga/dt-money-finance" alt="total amount of programming languages used in the project" /></a>
  <a href="https://github.com/LivioAlvarenga/dt-money-finance"><img src="https://img.shields.io/github/languages/top/LivioAlvarenga/dt-money-finance" alt="most used language in the projects" /></a>
  <a href="https://github.com/LivioAlvarenga/dt-money-finance"><img src="https://img.shields.io/github/repo-size/LivioAlvarenga/dt-money-finance" alt="repository size" /></a>
<p>

<p align="center">
  <a href= "#"><img alt="deploy badge Vercel" height=40 src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/fc06a7aa8d0f8ed5f446dcd83efd842e810d77df/files/vercel-badge.svg"></a>
<p>

&nbsp;

---

&nbsp;

<a id="-vitrine-dev"></a>

## üì∫ Vitrine Dev

| :placard: Vitrine.Dev |                                                                                                                                                             |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| :sparkles: Nome       | **Projeto FULLSTACK DT Money Gest√£o Financeira com Nextjs 13 App Router, React, Typescript, Tailwindcss, Axios, Docker, Prisma, Vitest e API Rest SOLID Nextjs.** |
| :label: Tecnologias   | NodeJs, TypeScript, JavaScript, Typescript, Nextjs, React, React Hook Form, Tailwind, ZodJs, Axios, Docker, Prisma, MySql, Vitest, EsLint, prettier.        |

---

&nbsp;
<a id="-tecnologias"></a>

## üõ† Tecnologias

As seguintes ferramentas foram usadas na constru√ß√£o do projeto

&nbsp;

<p align="center">
  <!-- <a href= ""><img alt="" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=ECD53F&logo=.ENV&label=Managing Environment Variables&message=.ENV&color=ECD53F"></a> -->
  <a href= "https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"><img alt="Node.js badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/nodejs-badge.svg"></a>
  <a href= "https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"><img alt="TypeScript badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/typescript-badge.svg"></a>
  <a href= "https://www.javascript.com/" target="_blank" rel="noopener noreferrer"><img alt="JavaScript badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/javascript-badge.svg"></a>
  <a href= "https://nextjs.org/"><img alt="Next.js badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/d0444795ba750206fa52326b03a097df76171407/files/nextjs-badge.svg"></a>
  <a href= "https://reactjs.org/"><img alt="React badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/d0444795ba750206fa52326b03a097df76171407/files/react-badge.svg"></a>
  <a href= "https://www.react-hook-form.com/"><img alt="React Hook Form badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/5630b5b0e026450403bfbe5acbe6dc8844642233/files/reactHookForm-badge.svg"></a>
  <a href= "https://www.radix-ui.com/"><img alt="Radix UI badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/56aa50fa69dabb03400754d307a197f28810c7e4/files/radix-ui-badge.svg"></a>
  <a href= "https://tailwindcss.com/"><img alt="Tailwind CSS badge" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=06b6d4&logo=Tailwind CSS&label=Style&message=Tailwind CSS&color=06b6d4"></a>
  <a href= "https://zod.dev/" target="_blank" rel="noopener noreferrer"><img alt="ZOD badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/7caba2f743ee9b61f0225a22da57466ecb67097c/files/zod-badge.svg"></a>
  <a href= "https://axios-http.com/"><img alt="Axios badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/c9f5fabeb5b6cbc25fb1151431e0b8e7412a3786/files/axios-badge.svg"></a>
  <a href= "https://www.figma.com/file/ddZDhVj3qZip1jZ9gibEAd/DT-Money-(Community)-(Copy)?mode=dev"><img alt="link projeto no figma" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/fc06a7aa8d0f8ed5f446dcd83efd842e810d77df/files/figma-badge.svg"></a>
  <a href= "https://www.dotenv.org/" target="_blank" rel="noopener noreferrer"><img alt="Dotenv badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/4eed338fdcd547570ed365f2b344e43c8202e88f/files/dotenv-badge.svg"></a>
  <a href= "https://www.prisma.io/"><img alt="Prisma badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/ef5ebd0021ccb0a8d244f5636b2b238ab0af09e7/files/prisma-badge.svg"></a>
  <a href= "https://www.docker.com/"><img alt="Docker badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/d7f6873e652db237a89583607eb70757ebaaa6d1/files/docker-badge.svg"></a>
  <a href= "https://www.mysql.com/"><img alt="MySQL badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/d7f6873e652db237a89583607eb70757ebaaa6d1/files/mysql-badge.svg"></a>
  <a href= "https://vitest.dev/"><img alt="Vitest Badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/28993b470420f2c44db532b4e6e662e60a186954/files/vitest-badge.svg"></a>
  <a href= "https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer"><img alt="vscode download" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/vsCode-badge.svg"></a>
  <a href= "https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer"><img alt="code formatter prettier" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/prettier-badge.svg"></a>
  <a href= "https://eslint.org/" target="_blank" rel="noopener noreferrer"><img alt="code standardization eslint" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/59575ed19b13121cd113cfc66a71f18dea210c79/files/eslint-badge.svg"></a>
</p>

---

&nbsp;
<a id="-instala√ß√£o"></a>

## ‚öôÔ∏è Instala√ß√µes

&nbsp;

### Criando **projeto NextJs Frontend / Backend**

```bash
# Create project nodejs with npm and -y to accept all default options
npx create-next-app@latest

# What is your project named? project-Name
# Would you like to use TypeScript with this project? Yes
# Would you like to use ESLint with this project? Yes
# Would you like to use Tailwind CSS with this project? Yes
# Would you like to use `src/` directory with this project? Yes
# Use App Router (recommended)? Yes
# Would you like to customize the default import alias? No
```

```json
// Create scripts in package.json
"scripts": {
  "dev": "next dev", // Start development server
  "build": "next build", // Create production build
  "start": "next start", // Start production server
  "lint": "next lint" // Run ESLint
},
```

_Create **`.gitignore`** file_

_Create **`.npmrc`** file with `save-exact=true` to save exact version of dependencies_

&nbsp;

### **.env** architecture

```bash
npm install dotenv # Install dotenv to use environment variables in NodeJs
```

_Create **`.env`** file with all environment variables and gitignore this file_

_Create **`.env.example`** file with all environment variables and not gitignore this file_

&nbsp;

### Configurando **ESlint and Prettier**

```bash
npm install -D @rocketseat/eslint-config # Install Rocketseat ESLint config
npm install -D prettier-plugin-tailwindcss # Install prettier plugin to use TailwindCSS
```

_Edit **`.eslintrc.json`** file with extends Rocketseat ESLint config_

```json
{
  "extends": ["next/core-web-vitals", "@rocketseat/eslint-config/react"],
  "overrides": [
    {
      "files": ["**/*.tsx"],
      "excludedFiles": ["page.tsx", "layout.tsx", "**/api/**/*"],
      "plugins": ["import"],
      "rules": {
        "import/no-default-export": "error"
      }
    }
  ]
}
```

_Create **`.eslintignore`** file with all ESLint ignore files_

_Create **`prettier.config.js`** file with plugin prettier-plugin-tailwindcss to use Prettier to format classnames of TailwindCSS_

```javascript
module.exports = {
  plugins: [require("prettier-plugin-tailwindcss")],
};
```

&nbsp;

### **Json-Server** architecture

```bash
npm install -D json-server # Install json-server to simulate API
```

_Create **`db.json`** file with data to simulate API / database_
_Create **`src/lib/json-server.js`** file with json-server configuration_

```javascript
// src/lib/json-server.js
const jsonServer = require("json-server");
const { randomUUID } = require("crypto");
const path = require("path");
const server = jsonServer.create();
const router = jsonServer.router(path.join(__dirname, "../../db.json"));
const middlewares = jsonServer.defaults({
  delay: 500,
  watch: true,
});

server.use(middlewares);
server.use(jsonServer.bodyParser);

server.use((req, res, next) => {
  // middleware to transform the price to cents
  if (req.method === "GET") {
    const originalSend = res.jsonp;
    res.jsonp = function (data) {
      // transform the transactions, if it is an array
      if (Array.isArray(data)) {
        data.forEach((transaction) => {
          transaction.price = transaction.price / 100; // transform to cents
        });
      }
      // transform the transaction, if it is an object
      else if (typeof data === "object" && data.price) {
        data.price = data.price / 100; // transform to cents
      }
      originalSend.call(this, data);
    };
  }

  // middleware to add createdAt, updatedAt and id
  if (req.method === "POST") {
    req.body.id = randomUUID();
    req.body.createdAt = new Date().toISOString();
    req.body.updatedAt = new Date().toISOString();
    req.body.price = req.body.price * 100; // transform to cents
  }

  // middleware to add updatedAt
  if (req.method === "PUT" || req.method === "PATCH") {
    req.body.updatedAt = new Date().toISOString();
    req.body.price = req.body.price * 100; // transform to cents
  }
  // Continue to JSON Server router
  next();
});

// Custom routes - to get summary
server.get("/transactions/summary", (req, res) => {
  const transactions = router.db.get("transactions").value();

  const summary = transactions.reduce(
    (acc, transaction) => {
      const priceInCents = transaction.price / 100; // transform to cents

      if (transaction.type === "income") {
        acc.income += priceInCents;
        acc.total += priceInCents;
      } else {
        acc.outcome += priceInCents;
        acc.total -= priceInCents;
      }

      return acc;
    },
    {
      income: 0,
      outcome: 0,
      total: 0,
    }
  );

  res.jsonp(summary);
});

server.get("/transactions/count", (req, res) => {
  const transactions = router.db.get("transactions").value();

  const count = transactions.length;
  res.jsonp({ count });
});

server.use(router);

server.listen(3333, () => {
  console.log("‚ö° JSON Server is running at http://localhost:3333 ‚ö°");
});
```

> Agora o json server ir√° salvar datas createdAt e updatedAt automaticamente com o valor Date.now() quando for feito um POST, PUT or PATCH.

> Adicionei tamb√©m um GET na rota /transactions/summary para passar o total income, outcome e total de todas as transa√ß√µes. Desta forma n√£o preciso fazer um reduce no front-end para calcular o total de income, outcome e total. Fazer isso no front-end √© uma m√° pr√°tica, pois o front-end n√£o deve ter essa responsabilidade.

> Adicionei tamb√©m um GET na rota /transactions/count para passar o total de transa√ß√µes.

```env
NEXT_PUBLIC_URL_API="http://localhost:3333/transactions"
```

```json
// Create scripts in package.json
"scripts": {
  "dev:server": "node src/lib/json-server.js",
},
```

Al√©m de modificar a vari√°vel de ambiente NEXT_PUBLIC_API_URL deve rodar o script dev:server para simular a API na porta 3333.

&nbsp;

### **API Nextjs com json de database** architecture

Iniciei o projeto com json-server para simular uma API. E assim foi poss√≠vel finalizar o front-end.

Porem o objetivo era criar uma API Rest no NextJs 13 com App router e utilizar o Prisma para conectar com o banco de dados MariaDB (MySQL). Assim para testar a funcionalidade da API com Next mantive o database em json e criei uma API transactions-json com os mesmos endpoints do json-server.
Assim foi poss√≠vel testar a funcionalidade da API com Next e manter o front-end funcionando para posteriormente conectar com o banco de dados MariaDB (MySQL).

Para testar esta funcionalidade, deve se modificar a vari√°vel de ambiente NEXT_PUBLIC_API_URL, assim n√£o ter√° que rodar o script dev:server para simular a API na porta 3333.

```env
NEXT_PUBLIC_URL_API="http://localhost:3000/api/transactions-json"
```

A API esta localizada em **`src/app/api/transactions-json`**.

> Mesmo apos desenvolver a API Rest com NextJs e SOLID, manterei tanto o json-server quanto o transactions-json para demostrar a evolu√ß√£o do projeto.

&nbsp;

### **Docker** architecture

> Instalando Docker https://docs.docker.com/get-docker/

```bash
# Command to run postgres image database without docker-compose. This image is from bitnami (https://hub.docker.com/r/bitnami/postgresql)
docker run --name api-solid-pg -e POSTGRESQL_USERNAME=docker -e POSTGRESQL_PASSWORD=docker -e POSTGRESQL_DATABASE=apisolid -p 5432:5432 bitnami/postgresql
# We don't use this command because we use docker-compose to run all images, this command is just to show how to run a single image
```

```json
// Create scripts in package.json
"scripts": {
  "start-docker": "docker-compose up -d", // Create script to run docker-compose in background
  "stop-docker": "docker-compose stop" // Create script to stop docker-compose
},
```

_Create **`docker-compose.yml`** file with all docker-compose config_

_Create **`.dockerignore`** file with all docker-compose ignore files_

```bash
# Commands to use docker
docker ps # List all running containers
docker ps -a # List all containers
docker images # List all images
docker pull mysql # Pull mysql image database (if you want to use mysql)
docker pull postgres # Pull postgres image database (if you want to use postgres)
docker pull mariadb # Pull mariadb image database (if you want to use mariadb)
docker start <container_id or container_name> # <container_id> Start container with id | <container_name> Start container with name
docker stop <container_id or container_name> # <container_id> Stop container with id | <container_name> Stop container with name
docker pause <container_id or container_name> # <container_id> Pause container with id | <container_name> Pause container with name
docker unpause <container_id or container_name> # <container_id> Unpause container with id | <container_name> Unpause container with name
docker rm <container_id or container_name> # <container_id> Remove container with id | <container_name> Remove container with name
docker logs <container_id or container_name> # <container_id> Show logs of container with id | <container_name> Show logs of container with name
docker inspect <container_id or container_name> # <container_id> Show all information of container with id | <container_name> Show all information of container with name
docker-compose --version # Show docker-compose version
docker-compose up # Run docker-compose, show logs in terminal
docker-compose up -d # Run docker-compose in background, not show logs in terminal
docker-compose start # Start o docker-compose
docker-compose stop # Stop o docker-compose, not remove all data in database
docker-compose down # Stop and remove o docker-compose, obs remove all data in database
```

&nbsp;

### **PrismaJs** database architecture

```bash
npm install prisma # Install Prisma
npm i prisma-erd-generator @mermaid-js/mermaid-cli # Install Prisma ERD generator
npm i @prisma/client # Install Prisma client

npx prisma init # Create prisma folder with prisma.schema and prisma folder
npx prisma migrate dev # Enter a name for the new migration: ¬ª created tab Habits
npx prisma studio # Open Prisma Studio in browser
npx prisma studio -b chrome -p 5173 # Open Prisma Studio in browser with specific port and browser
npx prisma generate # Generate diagram in prisma folder
npx prisma db seed # Seed database with data in prisma/seed.ts - Populate database with data for development
```

```typescript
// Add generator in prisma.schema
generator erd {
  provider = "prisma-erd-generator"
}
```

```json
// Create scripts in package.json
"scripts": {
  "studio": "npx prisma studio -b chrome -p 5173", // Create script to open Prisma Studio in browser with specific port and browser
  "generate": "npx prisma generate", // Create script to generate diagram in prisma folder
  "migrate": "npx prisma migrate dev", // Create script to migrate database
  "seed": "npx prisma db seed" // Create script to seed database
},
```

**`Environment variables to databases mysql`**

&nbsp;

_Create **`DATABASE_URL`** in .env and .env.example file with **`MySql`**_

```.env
DATABASE_URL="mysql://USER:PASSWORD@HOST:PORT/DATABASE_NAME"

SHADOW_DATABASE_URL="mysql://OTHER_USER:PASSWORD@HOST:PORT/OTHER_DATABASE_NAME"
```

> I used mysql, but you can use postgresql, mariadb, sqlite, sqlserver, mongodb, etc.

```typescript
// Add datasource in prisma.schema to mysql database
datasource db {
  provider          = "mysql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}
// https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database
// Exist provider that user cannot have access to create a database, to resolve this problem, you can use shadow database
```

&nbsp;

### **Vitest** architecture

```bash
npm install -D vitest # Install Vitest
npm install -D @vitest/coverage-v8 # Install coverage vitest
npm install -D @vitest/ui # Install vitest ui
npm install -D supertest # Install supertest to test http requests
npm install -D @types/supertest # Install types supertest
```

_Create **`vitest.config.ts`** file with all vitest config_

```typescript
import tsconfigPaths from "vite-tsconfig-paths";
import { defineConfig } from "vitest/config";

export default defineConfig({
  plugins: [tsconfigPaths()],
});
// now vitest can understand tsconfig paths
```

```json
// Create scripts in package.json
"scripts": {
  "test": "vitest run --dir src/use-cases", // Create script to run vitest
  "test:watch": "vitest --dir src/use-cases", // Create script to run vitest in watch mode
  "test:ui": "vitest --ui --no-threads", // Create script to run vitest with ui in browser with no-threads
  "test:coverage": "vitest run --coverage --no-threads", // Create script to run vitest with coverage in browser with no-threads
  "test:e2e": "vitest run --dir src/http/controllers --no-threads", // Create script to run vitest with e2e with no-threads
  "test:safety": "vitest run --dir src/http/middlewares" // Create script to run vitest with safety
},
```

>Foram criados 79 testes: sendo 55 e2e em 7 arquivos, 1 de seguran√ßa tentativa de Ataques DoS e DDoS e 23 testes unit√°rios em 7 arquivos. Todas as rotas foram testadas, e todos os casos de uso foram testados.

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/tests-ui-vitest.PNG?raw=true">
<p>

Observe que testes e2e, ui e coverage n√£o utilizam threads, pois n√£o foi poss√≠vel criar um vitest-environment-prisma para rodar os teste e2e isolados, sendo assim utilizamos o mesmo banco de dados para todos os testes, e isso pode gerar problemas de concorr√™ncia. Por isso n√£o utilizamos threads.

Estamos usando uma API interna do NextJs e n√£o consegui que o vitest reconhecesse o vitest-environment-prisma. Por isso o desafio foi criar testes e2e que apos cada teste ele limpasse os dados criados pelos testes.

Como a API inicia junto com a aplica√ß√£o Nextjs, sendo assim mesmo trocando a vari√°vel de ambiente DATABASE_URL apos cada teste, a API n√£o reconhece a troca da vari√°vel de ambiente. Por mais este motivo optei por realizar os testes e2e no mesmo banco de dados de desenvolvimento.

O pre√ßo a ser pago √© n√£o rodar os testes e2e em paralelo, pois n√£o podemos utilizar threads. Com isso perdemos um pouco de performance, mas ganhamos em confiabilidade. Neste trade-off optei por confiabilidade.

Poderia criar uma API SOLID REST isolada, mas o objetivo era criar uma API REST com NextJs 13 e App Router. Assim optei por utilizar a API interna do NextJs.

&nbsp;

**Prote√ß√µes Implementadas:**

- **Rate Limiting**: Meu aplicativo possui um sistema de limita√ß√£o de taxa para evitar ataques de inunda√ß√£o e prevenir sobrecarga do servidor. Isso √© essencial para combater ataques DoS (Denial-of-Service) e DDoS (Distributed Denial-of-Service).

- **Valida√ß√µes de Par√¢metros de Entrada**: Meus testes asseguram que os par√¢metros de entrada est√£o sendo corretamente validados. Isso √© crucial para prevenir vulnerabilidades como SQL injection, garantindo que entradas mal-intencionadas sejam rejeitadas.

- **Prote√ß√£o contra SQL Injection**: Implementei testes espec√≠ficos para detectar tentativas de inje√ß√£o SQL em v√°rios par√¢metros. Isso √© vital para impedir que atacantes executem comandos SQL n√£o autorizados no banco de dados do meu aplicativo.

- **Erros de Valida√ß√£o Amig√°veis**: Utilizando o ZodError, fa√ßo quest√£o de retornar mensagens de erro claras e amig√°veis. Isso ajuda a ocultar detalhes internos do sistema, mantendo uma boa pr√°tica de seguran√ßa.

- **Tratamento de Erros**: Gra√ßas ao middleware de tratamento de erros, posso ter certeza de que erros n√£o tratados n√£o causar√£o instabilidades no aplicativo nem revelar√£o informa√ß√µes sens√≠veis.

&nbsp;

Sem mais delongas, let's code! üöÄüöÄüöÄ

&nbsp;

### **Acessibilidade** architecture

A acessibilidade √© um dos pilares do desenvolvimento web. Por isso, √© importante que o projeto seja acess√≠vel para todos os usu√°rios. Para isso, utilizei o Radix UI para criar componentes acess√≠veis, como o Modal e o RadioGroup. Tamb√©m me preocupei com uma paleta de cores que atendesse aos padr√µes de acessibilidade.

Utilizei tags sem√¢nticas para melhorar a acessibilidade do projeto. Al√©m de boas praticas de uso dos atributos alt, title e aria-label...

```bash
npm install @radix-ui/react-radio-group # Install Radix UI to RadioGroup

npm install @radix-ui/react-dialog # Install Radix UI to Modal
```

&nbsp;

### **Others** libraries

```bash
npm install zod # Install zod to use types in NodeJs and validate data

npm install clsx # Install clsx to generate dynamic classnames

npm install react-hot-toast # Install react-hot-toast to use toast notifications
```

---

&nbsp;
<a id="-funcionalidades"></a>

## ‚öôÔ∏è Funcionalidades

### RF - Requisitos Funcionais

- Deve utilizar mobile first e ser responsivo;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/mobile.gif?raw=true">
<p>

- Deve ser poss√≠vel adicionar uma nova transa√ß√£o atrav√©s de um modal ao clicar no bot√£o Nova Transa√ß√£o;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/add-transaction.gif?raw=true">
<p>

- Deve ser poss√≠vel remover uma transa√ß√£o atrav√©s de um √≠cone de lixeira;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/delete-transaction.gif?raw=true">
<p>

- Deve ser poss√≠vel alterar dados de uma transa√ß√£o atrav√©s de um modal ao clicar na linha da tabela;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/edit-transaction.gif?raw=true">
<p>

- Deve ser poss√≠vel ter total de entradas, sa√≠das e total;

<p align="center">
  <img alt="deploy badge Vercel" src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/income-outcome-total.PNG?raw=true">
<p>

- Deve ser poss√≠vel exibir as transa√ß√µes em uma tabela paginada;
- Deve ser poss√≠vel passar as paginas da tabela com bot√µes de navega√ß√£o;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/pagination-transactions.gif?raw=true">
<p>

- Deve ser poss√≠vel em mobile ver um titulo com total de transa√ß√µes;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/quantity-transaction-mobile.PNG?raw=true">
<p>

- Deve ser poss√≠vel atualizar os valores de entrada, sa√≠da e total ao adicionar, remover e alterar uma transa√ß√£o;
- Deve ser poss√≠vel fazer uma pesquisa full de transa√ß√µes atrav√©s de descri√ß√£o, pre√ßo ou categoria. O sistema dever√° funcionar a pagina√ß√£o somente com este filtro;
- Deve ser poss√≠vel remover o filtro ap√≥s pesquisa;

<p align="center">
  <img alt="deploy badge Vercel" height=300 src="https://github.com/LivioAlvarenga/dt-money-finance/blob/main/files/search-transactions.gif?raw=true">
<p>

### RN - Regras de Neg√≥cio

- O usu√°rio n√£o pode criar/editar transa√ß√£o com campos vazios e inv√°lidos;
- O usu√°rio n√£o pode criar transa√ß√£o com pre√ßo negativo;
- O usu√°rio n√£o pode paginar a tabela com paginas negativas e nem maiores que o total de paginas;
- Os bot√µes de navega√ß√£o/input dever√£o ser desativados enquanto estiver carregando os dados da API;

### RNF - Requisitos N√£o Funcionais

- O pre√ßo deve ser armazenado em centavos para evitar erros de precis√£o, recebendo o valor em reais e convertendo para centavos e vice-versa;
- Uso de Zod para valida√ß√£o de dados de entrada;
- Uso de Eslint para padroniza√ß√£o de c√≥digo;
- Uso de Prettier para padroniza√ß√£o de c√≥digo;
- Uso de TailwindCSS para estiliza√ß√£o;
- Uso de Json Server para simular uma API;
- Uso de API Nextjs com App Router para criar uma API Rest;
- Uso de Radix UI para Modal e RadioGroup (componentes com acessibilidade);
- Uso de NextJs para SSR;
- Uso de TypeScript para tipagem est√°tica;
- Uso de NextJs com App Router para rotas;
- Uso Context API para compartilhar dados entre componentes;
- Uso de CLSX para gerar classnames din√¢micos;
- Uso de lucide-react para √≠cones;
- Uso de react-hook-form para formul√°rios;
- Uso de @hookform/resolvers para valida√ß√£o de formul√°rios;
- Uso de axios para requisi√ß√µes HTTP;
- Uso de toast para notifica√ß√µes;
- Uso de Prisma para conectar com o banco de dados MariaDB (MySQL);
- Uso de Docker para criar um container com o banco de dados MariaDB (MySQL);
- Uso de Vitest para testes unit√°rios e e2e;

&nbsp;

### üß≠ Rodando a aplica√ß√£o (Modo desenvolvimento) com json-server

```bash
git clone https://github.com/LivioAlvarenga/t-money-finance # Clone este reposit√≥rio
cd dt-money-finance # Acesse a pasta do projeto no seu terminal/cmd
npm install # Instale as depend√™ncias

# Modificar vari√°vel de ambiente NEXT_PUBLIC_URL_API no arquivo .env para:
NEXT_PUBLIC_URL_API="http://localhost:3333/transactions"

npm run dev:server # Execute o json-server para simular uma API. A API ser√° executada na porta:3333 - acesse http://localhost:3333
npm run dev # Execute a aplica√ß√£o em modo de desenvolvimento, a aplica√ß√£o ser√° aberta na porta:3000 - acesse http://localhost:3000
```

### üß≠ Rodando a aplica√ß√£o (Modo desenvolvimento) com API Nextjs com json de database

```bash
git clone https://github.com/LivioAlvarenga/t-money-finance # Clone este reposit√≥rio
cd dt-money-finance # Acesse a pasta do projeto no seu terminal/cmd
npm install # Instale as depend√™ncias

# Modificar vari√°vel de ambiente NEXT_PUBLIC_URL_API no arquivo .env para:
NEXT_PUBLIC_URL_API="http://localhost:3000/api/transactions-json"

npm run dev # Execute a aplica√ß√£o em modo de desenvolvimento, a aplica√ß√£o ser√° aberta na porta:3000 - acesse http://localhost:3000
```

### üß≠ Rodando a aplica√ß√£o (Modo desenvolvimento) com API Nextjs com Prisma e docker com database MariaDB (MySQL)

```bash
git clone https://github.com/LivioAlvarenga/t-money-finance # Clone este reposit√≥rio
cd dt-money-finance # Acesse a pasta do projeto no seu terminal/cmd
npm install # Instale as depend√™ncias

# Modificar vari√°vel de ambiente NEXT_PUBLIC_URL_API no arquivo .env para:
NEXT_PUBLIC_URL_API="http://localhost:3000/api/transactions"

npm run start-docker # Execute o docker-compose para criar um container com o banco de dados MariaDB (MySQL). O container ser√° executado na porta:3306 - acesse http://localhost:3306

npm run dev # Execute a aplica√ß√£o em modo de desenvolvimento, a aplica√ß√£o ser√° aberta na porta:3000 - acesse http://localhost:3000
```

### üß≠ Rodando a aplica√ß√£o (Modo produ√ß√£o)

```bash
npm run build # Compilar o TypeScript em modo de produ√ß√£o
npm run start # Iniciar o servidor em modo de produ√ß√£o
```

### üß≠ Prisma

```bash
npm run studio # Iniciar o Prisma Studio para visualizar o banco de dados
npm run migrate # Criar migrations do banco de dados
npm run seed # Popular o banco de dados com dados de desenvolvimento
npm run generate # Gerar diagrama do banco de dados
```

### üß≠ Testes

```bash
npm run test # Rodar testes unit√°rios
npm run test:watch # Rodar testes unit√°rios em watch mode
npm run test:ui # Rodar testes unit√°rios com vitest ui
npm run test:coverage # Rodar testes unit√°rios com vitest coverage
npm run test:e2e # Rodar testes e2e
npm run test:safety # Rodar testes de seguran√ßa
```

&nbsp;

---

&nbsp;
<a id="-deploy"></a>

## üöÄ Deploy

O deploy foi realizado na plataforma Vercel.com.

As vari√°veis de ambiente configuradas incluem:

- ...

---

&nbsp;
<a id="-good-habits"></a>

## ‚úÖ Good Habits

&nbsp;

### ‚ùó 1 - O hook useCallBack

&nbsp;

- O que √© `useCallback`?

`useCallback` √© um hook do React que retorna uma **vers√£o memorizada** de uma fun√ß√£o callback que s√≥ muda se uma das depend√™ncias mudar. Ele √© √∫til quando voc√™ tem um componente filho otimizado que depende de uma fun√ß√£o callback do componente pai. Se voc√™ n√£o usar o `useCallback`, o componente filho ser√° re-renderizado toda vez que a fun√ß√£o pai for re-renderizada, mesmo que a fun√ß√£o callback n√£o tenha mudado.

- Qual problema o `useCallback` resolve?

O `useCallback` resolve o problema de performance de re-renderiza√ß√£o de componentes filhos que dependem de fun√ß√µes callback do componente pai. Sem o `useCallback`, o componente filho ser√° re-renderizado toda vez que a fun√ß√£o pai for re-renderizada, mesmo que a fun√ß√£o callback n√£o tenha mudado.

Imagine que voc√™ tem um componente pai que passa uma fun√ß√£o callback para um componente filho. Sem `useCallback`, uma nova fun√ß√£o callback √© criada toda vez que o componente pai √© renderizado. Isso significa que o _componente filho tamb√©m √© renderizado_ toda vez que o componente pai √© renderizado porque a fun√ß√£o callback passada para ele √© considerada uma nova prop.

Agora, _isso pode n√£o ser um problema se a renderiza√ß√£o do componente filho for barata_. No entanto, se a renderiza√ß√£o do componente filho for cara ou se o componente filho estiver otimizado (por exemplo, com `React.memo` ou `shouldComponentUpdate`), voc√™ ter√° **renderiza√ß√µes desnecess√°rias**.

> `useCallback` resolve esse problema, criando uma vers√£o memorizada da fun√ß√£o callback que s√≥ muda se uma das depend√™ncias mudar. Isso significa que, se as depend√™ncias n√£o mudarem, a mesma fun√ß√£o callback ser√° passada ao componente filho, evitando renderiza√ß√µes desnecess√°rias.

&nbsp;

**_Tudo certo, mas show me the code!_**

&nbsp;

```tsx
import React, { useState } from "react";

function App() {
  const [count, setCount] = useState(0);

  const increment = () => {
    console.log("Criando uma nova fun√ß√£o increment.");
    setCount(count + 1);
  };

  return (
    <div>
      Count: {count}
      <Button onClick={increment} />
    </div>
  );
}

const Button = React.memo(({ onClick }) => {
  console.log("Renderizando o componente Button.");
  return (
    <button type="button" onClick={onClick}>
      Increment count
    </button>
  );
});

export default App;
```

No exemplo acima, o componente `Button` √© otimizado com `React.memo`, o que significa que ele s√≥ ser√° renderizado se suas props mudarem. No entanto, como a `fun√ß√£o increment` √© **_recriada toda vez que o App √© renderizado_**, `Button` **_tamb√©m ser√° renderizado toda vez que App for renderizado_**.

&nbsp;

---

&nbsp;
<a id="-autor"></a>

## ü¶∏ Autor

Ol√°, eu sou Livio Alvarenga, Engenheiro de Produ√ß√£o | Dev Back-end e Front-end. Sou aficcionado por tecnologia, programa√ß√£o, processos e planejamento. Uni todas essas paix√µes em uma s√≥ profiss√£o. D√∫vidas, sugest√µes e cr√≠ticas s√£o super bem vindas. Seguem meus contatos.

- [www.livioalvarenga.com](https://livioalvarenga.com)
- contato@livioalvarenga.com

&nbsp;

<p align="center">
  <a href= "https://www.livioalvarenga.com/"><img alt="portf√≥lio livio alvarenga" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/3109a24e71f07dbad193ae0ddbc43b69b39c7adf/files/badgePortifolioLivio.svg"></a>
  <a href= "https://www.linkedin.com/in/livio-alvarenga-planejamento-mrp-engenheiro-produ%C3%A7%C3%A3o-materiais-vba-powerbi/"><img alt="perfil LinkedIn livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=0A66C2&logo=LinkedIn&label=LinkedIn&message=Livio Alvarenga&color=0A66C2"></a>
  <a href= "https://twitter.com/AlvarengaLivio"><img alt="perfil twitter livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=1DA1F2&logo=Twitter&label=Twitter&message=@AlvarengaLivio&color=1DA1F2"></a>
  <a href= "https://www.instagram.com/livio_alvarenga/"><img alt="perfil Instagram livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=E4405F&logo=Instagram&label=Instagram&message=@livio_alvarenga&color=E4405F"></a>
  <a href= "https://www.facebook.com/profile.php?id=100083957091312"><img alt="perfil Facebook livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=1877F2&logo=Facebook&label=Facebook&message=Livio Alvarenga&color=1877F2"></a>
  <a href= "https://www.youtube.com/channel/UCrZgsh8IWyyNrRZ7cjrPbcg"><img alt="perfil YouTube livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=FF0000&logo=YouTube&label=Youtube&message=Livio Alvarenga&color=FF0000"></a>
</p>
<p align="center">
 <a href= "https://cursos.alura.com.br/vitrinedev/livioalvarenga"><img alt="perfil vitrinedev livio alvarenga" align="center" height="30" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/e0f5b5a82976af114d957c20f0c78b4d304a68a0/files/vitrinedev.svg"></a>
</p>

---

&nbsp;
<a id="-licen√ßa"></a>

## üìù Licen√ßa

Este projeto √© [MIT licensed](./LICENSE).

##### _#CompartilheConhecimento_
